function cov_11i1kvii7z(){var path="C:\\Users\\euler\\OneDrive\\\u684C\u9762\\3813\\week4\\server\\server.js";var hash="f4e425e7a506b15e986d35f73e53d49df5f61f4e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\euler\\OneDrive\\\u684C\u9762\\3813\\week4\\server\\server.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:12},end:{line:2,column:21}},"2":{start:{line:3,column:13},end:{line:3,column:28}},"3":{start:{line:4,column:13},end:{line:4,column:40}},"4":{start:{line:5,column:11},end:{line:10,column:2}},"5":{start:{line:12,column:17},end:{line:12,column:44}},"6":{start:{line:13,column:12},end:{line:13,column:40}},"7":{start:{line:14,column:19},end:{line:14,column:41}},"8":{start:{line:15,column:13},end:{line:15,column:28}},"9":{start:{line:16,column:16},end:{line:16,column:38}},"10":{start:{line:17,column:15},end:{line:17,column:37}},"11":{start:{line:18,column:9},end:{line:18,column:22}},"12":{start:{line:20,column:13},end:{line:20,column:17}},"13":{start:{line:21,column:15},end:{line:21,column:29}},"14":{start:{line:22,column:19},end:{line:22,column:40}},"15":{start:{line:24,column:22},end:{line:24,column:40}},"16":{start:{line:25,column:9},end:{line:25,column:54}},"17":{start:{line:27,column:11},end:{line:27,column:28}},"18":{start:{line:29,column:0},end:{line:29,column:16}},"19":{start:{line:30,column:0},end:{line:30,column:51}},"20":{start:{line:31,column:0},end:{line:31,column:27}},"21":{start:{line:32,column:0},end:{line:32,column:67}},"22":{start:{line:33,column:0},end:{line:33,column:67}},"23":{start:{line:36,column:2},end:{line:36,column:52}},"24":{start:{line:37,column:2},end:{line:37,column:54}},"25":{start:{line:38,column:2},end:{line:38,column:50}},"26":{start:{line:39,column:2},end:{line:39,column:44}},"27":{start:{line:40,column:2},end:{line:40,column:50}},"28":{start:{line:41,column:2},end:{line:41,column:66}},"29":{start:{line:43,column:2},end:{line:43,column:36}},"30":{start:{line:46,column:0},end:{line:46,column:26}},"31":{start:{line:48,column:0},end:{line:48,column:21}}},fnMap:{},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},f:{},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f4e425e7a506b15e986d35f73e53d49df5f61f4e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_11i1kvii7z=function(){return actualCoverage;};}return actualCoverage;}cov_11i1kvii7z();const express=(cov_11i1kvii7z().s[0]++,require('express'));const app=(cov_11i1kvii7z().s[1]++,express());const cors=(cov_11i1kvii7z().s[2]++,require('cors'));const http=(cov_11i1kvii7z().s[3]++,require('http').Server(app));const io=(cov_11i1kvii7z().s[4]++,require('socket.io')(http,{cors:{origin:"http://localhost:4200",methods:["GET","POST"]}}));const ObjectID=(cov_11i1kvii7z().s[5]++,require('mongodb').ObjectID);const url=(cov_11i1kvii7z().s[6]++,"mongodb://127.0.0.1:27017/");const bodyParser=(cov_11i1kvii7z().s[7]++,require('body-parser'));const path=(cov_11i1kvii7z().s[8]++,require('path'));const sockets=(cov_11i1kvii7z().s[9]++,require('./socket.js'));const server=(cov_11i1kvii7z().s[10]++,require('./listen.js'));var fs=(cov_11i1kvii7z().s[11]++,require('fs'));const PORT=(cov_11i1kvii7z().s[12]++,3000);const dbName=(cov_11i1kvii7z().s[13]++,'ChatDatabase');const formidable=(cov_11i1kvii7z().s[14]++,require('formidable'));const{MongoClient}=(cov_11i1kvii7z().s[15]++,require('mongodb')),client=(cov_11i1kvii7z().s[16]++,new MongoClient('mongodb://127.0.0.1:27017/'));const db=(cov_11i1kvii7z().s[17]++,client.db(dbName));// Middleware
cov_11i1kvii7z().s[18]++;app.use(cors());cov_11i1kvii7z().s[19]++;app.use(bodyParser.urlencoded({extended:true}));cov_11i1kvii7z().s[20]++;app.use(bodyParser.json());cov_11i1kvii7z().s[21]++;app.use(express.static(path.join(__dirname,'/../dist/week4tut')));cov_11i1kvii7z().s[22]++;app.use('/image',express.static(path.join(__dirname,'./image')));// Define your REST API routes
cov_11i1kvii7z().s[23]++;require('./router/postLogin.js')(db,app,client);cov_11i1kvii7z().s[24]++;require('./router/postLoginafter')(db,app,client);cov_11i1kvii7z().s[25]++;require('./router/superadmin')(db,app,client);cov_11i1kvii7z().s[26]++;require('./router/chat')(db,app,client);cov_11i1kvii7z().s[27]++;require('./router/groupadmin')(db,app,client);cov_11i1kvii7z().s[28]++;require('./router/uploads')(db,app,formidable,client,fs,path);cov_11i1kvii7z().s[29]++;require('./listen.js')(http,PORT);// Socket.io setup
cov_11i1kvii7z().s[30]++;sockets.connect(io,PORT);cov_11i1kvii7z().s[31]++;module.exports=app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTFpMWt2aWk3eiIsImFjdHVhbENvdmVyYWdlIiwiZXhwcmVzcyIsInMiLCJyZXF1aXJlIiwiYXBwIiwiY29ycyIsImh0dHAiLCJTZXJ2ZXIiLCJpbyIsIm9yaWdpbiIsIm1ldGhvZHMiLCJPYmplY3RJRCIsInVybCIsImJvZHlQYXJzZXIiLCJwYXRoIiwic29ja2V0cyIsInNlcnZlciIsImZzIiwiUE9SVCIsImRiTmFtZSIsImZvcm1pZGFibGUiLCJNb25nb0NsaWVudCIsImNsaWVudCIsImRiIiwidXNlIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwianNvbiIsInN0YXRpYyIsImpvaW4iLCJfX2Rpcm5hbWUiLCJjb25uZWN0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7XHJcbmNvbnN0IGh0dHAgPSByZXF1aXJlKCdodHRwJykuU2VydmVyKGFwcCk7XHJcbmNvbnN0IGlvID0gcmVxdWlyZSgnc29ja2V0LmlvJykoaHR0cCwge1xyXG4gIGNvcnM6IHtcclxuICAgIG9yaWdpbjogXCJodHRwOi8vbG9jYWxob3N0OjQyMDBcIixcclxuICAgIG1ldGhvZHM6IFtcIkdFVFwiLCBcIlBPU1RcIl0sXHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCBPYmplY3RJRCA9IHJlcXVpcmUoJ21vbmdvZGInKS5PYmplY3RJRDtcclxuY29uc3QgdXJsID0gXCJtb25nb2RiOi8vMTI3LjAuMC4xOjI3MDE3L1wiO1xyXG5jb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuY29uc3Qgc29ja2V0cyA9IHJlcXVpcmUoJy4vc29ja2V0LmpzJyk7XHJcbmNvbnN0IHNlcnZlciA9IHJlcXVpcmUoJy4vbGlzdGVuLmpzJyk7XHJcbnZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XHJcblxyXG5jb25zdCBQT1JUID0gMzAwMDtcclxuY29uc3QgZGJOYW1lID0gJ0NoYXREYXRhYmFzZSc7XHJcbmNvbnN0IGZvcm1pZGFibGUgPSByZXF1aXJlKCdmb3JtaWRhYmxlJyk7XHJcblxyXG5jb25zdCB7TW9uZ29DbGllbnR9ID0gcmVxdWlyZSgnbW9uZ29kYicpLFxyXG5jbGllbnQgPSBuZXcgTW9uZ29DbGllbnQoJ21vbmdvZGI6Ly8xMjcuMC4wLjE6MjcwMTcvJyk7XHJcblxyXG5jb25zdCBkYiA9IGNsaWVudC5kYihkYk5hbWUpO1xyXG4vLyBNaWRkbGV3YXJlXHJcbmFwcC51c2UoY29ycygpKTtcclxuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XHJcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xyXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICcvLi4vZGlzdC93ZWVrNHR1dCcpKSk7XHJcbmFwcC51c2UoJy9pbWFnZScsZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSAsICcuL2ltYWdlJykpKTtcclxuXHJcbiAgLy8gRGVmaW5lIHlvdXIgUkVTVCBBUEkgcm91dGVzXHJcbiAgcmVxdWlyZSgnLi9yb3V0ZXIvcG9zdExvZ2luLmpzJykoZGIsIGFwcCwgY2xpZW50KTtcclxuICByZXF1aXJlKCcuL3JvdXRlci9wb3N0TG9naW5hZnRlcicpKGRiLCBhcHAsIGNsaWVudCk7XHJcbiAgcmVxdWlyZSgnLi9yb3V0ZXIvc3VwZXJhZG1pbicpKGRiLCBhcHAsIGNsaWVudCk7XHJcbiAgcmVxdWlyZSgnLi9yb3V0ZXIvY2hhdCcpKGRiLCBhcHAsIGNsaWVudCk7XHJcbiAgcmVxdWlyZSgnLi9yb3V0ZXIvZ3JvdXBhZG1pbicpKGRiLCBhcHAsIGNsaWVudCk7XHJcbiAgcmVxdWlyZSgnLi9yb3V0ZXIvdXBsb2FkcycpKGRiLCBhcHAsZm9ybWlkYWJsZSwgY2xpZW50LGZzLHBhdGgpO1xyXG5cclxuICByZXF1aXJlKCcuL2xpc3Rlbi5qcycpKGh0dHAsUE9SVCk7XHJcblxyXG4vLyBTb2NrZXQuaW8gc2V0dXBcclxuc29ja2V0cy5jb25uZWN0KGlvLCBQT1JUKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYXBwOyJdLCJtYXBwaW5ncyI6ImdsRkFlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FmWixLQUFNLENBQUFFLE9BQU8sRUFBQUYsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFDbEMsS0FBTSxDQUFBQyxHQUFHLEVBQUFMLGNBQUEsR0FBQUcsQ0FBQSxNQUFHRCxPQUFPLENBQUMsQ0FBQyxFQUNyQixLQUFNLENBQUFJLElBQUksRUFBQU4sY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFDNUIsS0FBTSxDQUFBRyxJQUFJLEVBQUFQLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUNJLE1BQU0sQ0FBQ0gsR0FBRyxDQUFDLEVBQ3hDLEtBQU0sQ0FBQUksRUFBRSxFQUFBVCxjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDRyxJQUFJLENBQUUsQ0FDcENELElBQUksQ0FBRSxDQUNKSSxNQUFNLENBQUUsdUJBQXVCLENBQy9CQyxPQUFPLENBQUUsQ0FBQyxLQUFLLENBQUUsTUFBTSxDQUN6QixDQUNGLENBQUMsQ0FBQyxFQUVGLEtBQU0sQ0FBQUMsUUFBUSxFQUFBWixjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDUSxRQUFRLEVBQzVDLEtBQU0sQ0FBQUMsR0FBRyxFQUFBYixjQUFBLEdBQUFHLENBQUEsTUFBRyw0QkFBNEIsRUFDeEMsS0FB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